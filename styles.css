/* Extracted theme variables and utilities */
:root {
  --primary-50: rgb(238 242 255);
  --primary-100: rgb(224 231 255);
  --primary-200: rgb(199 210 254);
  --primary-300: rgb(165 180 252);
  --primary-400: rgb(129 140 248);
  --primary-500: rgb(99 102 241);
  --primary-600: rgb(79 70 229);
  --primary-700: rgb(67 56 202);
  --primary-800: rgb(55 48 163);
  --primary-900: rgb(49 46 129);
}

.bg-primary-50 { background-color: var(--primary-50); }
.bg-primary-100 { background-color: var(--primary-100); }
.bg-primary-500 { background-color: var(--primary-500); }
.bg-primary-600 { background-color: var(--primary-600); }
.bg-primary-700 { background-color: var(--primary-700); }
.text-primary-500 { color: var(--primary-500); }
.text-primary-600 { color: var(--primary-600); }
.text-primary-700 { color: var(--primary-700); }
.border-primary-500 { border-color: var(--primary-500); }
.ring-primary-500 { --tw-ring-color: var(--primary-500); }
.focus\:ring-primary-500:focus { --tw-ring-color: var(--primary-500); }
.dark .text-primary-300 { color: var(--primary-300); }
.dark .bg-primary-500\/20 { background-color: rgb(from var(--primary-500) r g b / 0.2); }

/* Base typography */
body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

/* Icon button */
.icon-btn { padding: 0.5rem; border-radius: 0.5rem; transition: background-color 0.2s ease-in-out; }
.icon-btn:hover { background-color: rgb(229 231 235); }
.dark .icon-btn:hover { background-color: rgb(55 65 81); }

/* Theme buttons */
.theme-btn.active { background-color: var(--primary-50) !important; }
.dark .theme-btn.active { background-color: rgb(from var(--primary-500) r g b / 0.25) !important; }
html.greyscale .theme-btn.active { filter: grayscale(0.2) brightness(1.05); }

/* Form accents */
input[type="checkbox"], input[type="radio"], input[type="range"] { accent-color: var(--primary-600); }
.dark input[type="checkbox"], .dark input[type="radio"], .dark input[type="range"] { accent-color: var(--primary-400); }

/* Input placeholder style - muted but consistent */
::placeholder { color: rgb(156 163 175); /* gray-400 */ opacity: 1; }
.dark ::placeholder { color: rgb(107 114 128); /* gray-500 */ opacity: 1; }

/* Password generator slider */
#generator-length-slider {
  height: 6px;
  background-color: #e5e7eb; /* gray-200 */
  border-radius: 9999px;
  outline: none;
}
#generator-length-slider::-webkit-slider-runnable-track {
  height: 6px;
  background-color: #e5e7eb; /* gray-200 */
  border-radius: 9999px;
}
#generator-length-slider::-moz-range-track {
  height: 6px;
  background-color: #e5e7eb;
  border-radius: 9999px;
}
#generator-length-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  background-color: var(--primary-600);
  border-radius: 9999px;
  border: 2px solid white;
  margin-top: -6px; /* centers thumb on track */
}
#generator-length-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  background-color: var(--primary-600);
  border: 2px solid white;
  border-radius: 9999px;
}
.dark #generator-length-slider {
  background-color: #374151; /* gray-700 */
}
.dark #generator-length-slider::-webkit-slider-runnable-track {
  background-color: #374151; /* gray-700 */
}
.dark #generator-length-slider::-moz-range-track {
  background-color: #374151; /* gray-700 */
}
.dark #generator-length-slider::-webkit-slider-thumb {
  background-color: var(--primary-400);
  border-color: #111827; /* gray-900 */
}
.dark #generator-length-slider::-moz-range-thumb {
  background-color: var(--primary-400);
  border-color: #111827;
}

/* Grid layouts */
.main-grid { grid-template-columns: 280px 1fr 2fr; }
.main-grid.three-column { grid-template-columns: 280px 1fr 1fr; }
.main-grid.two-column { grid-template-columns: 280px 1fr; }

/* Responsive tweaks */
@media (max-width: 1024px) {
  .main-grid { grid-template-columns: 1fr 1.5fr; }
  .main-grid.three-column { grid-template-columns: 1fr 1fr; }
  #third-panel-container { display: none !important; }
  #nav-sidebar { position: fixed; left: -280px; top: 0; height: 100%; z-index: 40; transition: left 0.3s ease-in-out; box-shadow: 0 0 15px rgba(0,0,0,0.2); }
  #nav-sidebar.is-open { left: 0; }
}
@media (max-width: 767px) {
  .main-grid { grid-template-columns: 1fr; }
  #item-list-container.mobile-hidden { display: none; }
  #details-pane-container:not(.mobile-hidden) { display: block; }
  #details-pane-container.mobile-hidden { display: none; }
}

/* Scrollbars */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
.dark ::-webkit-scrollbar-track { background: #2d3748; }
::-webkit-scrollbar-thumb { background: #888; border-radius: 10px; }
.dark ::-webkit-scrollbar-thumb { background: #555; }
::-webkit-scrollbar-thumb:hover { background: #555; }
.dark ::-webkit-scrollbar-thumb:hover { background: #777; }

/* Hide scrollbars completely */
.scrollbar-hidden { -ms-overflow-style: none; scrollbar-width: none; }
.scrollbar-hidden::-webkit-scrollbar { display: none; }

/* Scroll isolation */
.scroll-isolated { overscroll-behavior: contain; overscroll-behavior-y: contain; }

/* Hide number spinners */
input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
input[type=number] { appearance: textfield; -moz-appearance: textfield; }

/* Flash highlight */
@keyframes flashHighlight { 0% { box-shadow: 0 0 0 3px var(--primary-500); background-color: var(--primary-50); } 60% { box-shadow: 0 0 0 0 var(--primary-500); background-color: transparent; } 100% { box-shadow: none; background-color: transparent; } }
.flash-highlight { animation: flashHighlight 1.6s ease-out 1; }

/* Inactivity banner: transparent primary glass with subtle reflection */
#inactivity-banner {
  position: relative;
  background-color: rgb(from var(--primary-600) r g b / 0.12) !important;
  border-color: rgb(from var(--primary-600) r g b / 0.35) !important;
  color: var(--primary-700) !important;
  backdrop-filter: saturate(120%) blur(6px);
  -webkit-backdrop-filter: saturate(120%) blur(6px);
  box-shadow: 0 4px 16px rgba(0,0,0,0.06);
}
#inactivity-banner::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(135deg, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.12) 20%, rgba(255,255,255,0) 45%);
  pointer-events: none;
}
.dark #inactivity-banner {
  background-color: rgb(from var(--primary-700) r g b / 0.25) !important;
  border-color: rgb(from var(--primary-600) r g b / 0.5) !important;
  color: #ffffff !important;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}
.dark #inactivity-banner::before {
  background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.06) 20%, rgba(255,255,255,0) 45%);
}

/* Greyscale theme - desaturate entire UI while keeping readability */
html.greyscale body {
  filter: grayscale(1) contrast(0.95) brightness(0.97);
}
/* Allow opt-out for specific elements (e.g., logos, strength bar if desired) */
html.greyscale .no-greyscale, html.greyscale .no-greyscale * { filter: none !important; }
/* Slightly reduce desaturation for toast container so feedback remains clear */
html.greyscale #toast-container { filter: grayscale(0.25) brightness(1); }

/* Profile completion banner (ensures good contrast in dark mode) */
.profile-complete-banner {
  background: var(--primary-50);
  border: 1px solid var(--primary-200);
  color: var(--primary-700);
}
.dark .profile-complete-banner {
  background: rgba(99,102,241,0.18); /* primary-600 with transparency */
  border: 1px solid rgba(129,140,248,0.35); /* primary-400/500 mix */
  color: var(--primary-100);
  backdrop-filter: saturate(140%) blur(4px);
  -webkit-backdrop-filter: saturate(140%) blur(4px);
}
.profile-complete-banner svg { color: var(--primary-600); }
.dark .profile-complete-banner svg { color: var(--primary-300); }
